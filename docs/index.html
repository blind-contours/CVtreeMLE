<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A methodology for mixed exposure analysis that leverages
    data-adaptive target parameters, CV-TMLE, and decision trees.">
<title>Cross Validated Decision Trees with Targeted Maximum Likelihood
    Estimation • CVtreeMLE</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Cross Validated Decision Trees with Targeted Maximum Likelihood
    Estimation">
<meta property="og:description" content="A methodology for mixed exposure analysis that leverages
    data-adaptive target parameters, CV-TMLE, and decision trees.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">CVtreeMLE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/intro_CVtreeMLE.html">Evaluating Causal Effects of Mixed Exposures using Data Adaptive Decision Trees and CV-TMLE</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="cvtreemle-">
<code>CVtreeMLE</code> <img src="reference/figures/CVtreeMLE_sticker.png" style="float:right; height:200px;"><a class="anchor" aria-label="anchor" href="#cvtreemle-"></a>
</h1></div>
<!-- badges: start -->

<blockquote>
<p>Discovery of Critical Thresholds in Mixed Exposures and Estimation of Policy Intervention Effects using Targeted Learning</p>
</blockquote>
<p><strong>Author:</strong> <a href="https://davidmccoy.org" class="external-link">David McCoy</a></p>
<hr>
<div class="section level2">
<h2 id="what-is-cvtreemle">What is <code>CVtreeMLE</code>?<a class="anchor" aria-label="anchor" href="#what-is-cvtreemle"></a>
</h2>
<p>This package operationalizes the methodology presented here:</p>
<p><a href="https://arxiv.org/abs/2302.07976" class="external-link uri">https://arxiv.org/abs/2302.07976</a></p>
<p>People often encounter multiple simultaneous exposures (e.g. several drugs or pollutants). Policymakers are interested in setting safe limits, interdictions, or recommended dosage combinations based on a combination of thresholds, one per exposure. Setting these thresholds is difficult because all relevant interactions between exposures must be accounted for. Previous statistical methods have used parametric estimators which do not directly address the question of safe exposure limits, rely on unrealistic assumptions, and do not result in a threshold based statistical quantity that is directly relevant to policy regulators.</p>
<p>Here we present an estimator that a) identifies thresholds that minimize/maximize the expected outcome controlling for covariates and other exposures; and which b) efficiently estimates a policy intervention which compares the expected outcome if everyone was forced to these safe levels compared to the observed outcome under observed exposure distribution.</p>
<p>This is done by using cross-validation where in training folds of the data, a custom g-computation tree-based search algorithm finds the minimizing region, and an estimation sample is used to estimate the policy intervention using targeted maximum likelihood estimation.</p>
</div>
<div class="section level2">
<h2 id="inputs-and-outputs">Inputs and Outputs<a class="anchor" aria-label="anchor" href="#inputs-and-outputs"></a>
</h2>
<p>This package takes in a mixed exposure, covariates, outcome, super learner stacks of learners if determined (if not default are used), number of folds, minimum observations in a region, if the desired region is minimizer or maximizer and parallelization parameters.</p>
<p>The output are k-fold specific results for the region found in each fold with valid inference, a pooled estimate of the overall oracle parameter across all folds and pooled exposure sets if the region has some inconsistency across the folds.</p>
<hr>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><em>Note:</em> Because <code>CVtreeMLE</code> package (currently) depends on <code>sl3</code> that allows ensemble machine learning to be used for nuisance parameter estimation and <code>sl3</code> is not on CRAN the <code>CVtreeMLE</code> package is not available on CRAN and must be downloaded here.</p>
<p>There are many dependencies for <code>CVtreeMLE</code> so it’s easier to break up installation of the various packages to ensure proper installation.</p>
<p><code>CVtreeMLE</code> uses the <code>sl3</code> package to build ensemble machine learners for each nuisance parameter.</p>
<p>Install <code>sl3</code> on devel:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"tlverse/sl3@devel"</span><span class="op">)</span></span></code></pre></div>
<p>Make sure <code>sl3</code> installs correctly then install <code>CVtreeMLE</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"blind-contours/CVtreeMLE@main"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>First load the package and other packages needed</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">CVtreeMLE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tlverse.org/sl3" class="external-link">sl3</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">98484</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span></span></code></pre></div>
<p>To illustrate how <code>CVtreeMLE</code> may be used to find and estimate a region that, if intervened on would lead to the biggest reduction in an outcome we use synthetic data from the National Institute of Environmental Health:</p>
</div>
<div class="section level2">
<h2 id="national-institute-of-environmental-health-data">National Institute of Environmental Health Data<a class="anchor" aria-label="anchor" href="#national-institute-of-environmental-health-data"></a>
</h2>
<p>The 2015 NIEHS Mixtures Workshop was developed to determine if new mixture methods detect ground-truth interactions built into the simulated data. In this way we can simultaneously show <code>CVtreeMLE</code> output, interpretation and validity.</p>
<p>For detailed information on this simulated data please see:</p>
<p><a href="https://github.com/niehs-prime/2015-NIEHS-MIxtures-Workshop" class="external-link uri">https://github.com/niehs-prime/2015-NIEHS-MIxtures-Workshop</a></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">niehs_data</span> <span class="op">&lt;-</span> <span class="va">NIEHS_data_1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">niehs_data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"NIEHS Data"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
NIEHS Data
</caption>
<thead><tr>
<th style="text-align:right;">
obs
</th>
<th style="text-align:right;">
Y
</th>
<th style="text-align:right;">
X1
</th>
<th style="text-align:right;">
X2
</th>
<th style="text-align:right;">
X3
</th>
<th style="text-align:right;">
X4
</th>
<th style="text-align:right;">
X5
</th>
<th style="text-align:right;">
X6
</th>
<th style="text-align:right;">
X7
</th>
<th style="text-align:right;">
Z
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7.534686
</td>
<td style="text-align:right;">
0.4157066
</td>
<td style="text-align:right;">
0.5308077
</td>
<td style="text-align:right;">
0.2223965
</td>
<td style="text-align:right;">
1.1592634
</td>
<td style="text-align:right;">
2.4577556
</td>
<td style="text-align:right;">
0.9438601
</td>
<td style="text-align:right;">
1.8714406
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
19.611934
</td>
<td style="text-align:right;">
0.5293572
</td>
<td style="text-align:right;">
0.9339570
</td>
<td style="text-align:right;">
1.1210595
</td>
<td style="text-align:right;">
1.3350074
</td>
<td style="text-align:right;">
0.3096883
</td>
<td style="text-align:right;">
0.5190970
</td>
<td style="text-align:right;">
0.2418065
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
12.664050
</td>
<td style="text-align:right;">
0.4849759
</td>
<td style="text-align:right;">
0.7210988
</td>
<td style="text-align:right;">
0.4629027
</td>
<td style="text-align:right;">
1.0334138
</td>
<td style="text-align:right;">
0.9492810
</td>
<td style="text-align:right;">
0.3664090
</td>
<td style="text-align:right;">
0.3502445
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
15.600288
</td>
<td style="text-align:right;">
0.8275456
</td>
<td style="text-align:right;">
1.0457137
</td>
<td style="text-align:right;">
0.9699040
</td>
<td style="text-align:right;">
0.9045099
</td>
<td style="text-align:right;">
0.9107914
</td>
<td style="text-align:right;">
0.4299847
</td>
<td style="text-align:right;">
1.0007901
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
18.606498
</td>
<td style="text-align:right;">
0.5190363
</td>
<td style="text-align:right;">
0.7802400
</td>
<td style="text-align:right;">
0.6142188
</td>
<td style="text-align:right;">
0.3729743
</td>
<td style="text-align:right;">
0.5038126
</td>
<td style="text-align:right;">
0.3575472
</td>
<td style="text-align:right;">
0.5906156
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
18.525890
</td>
<td style="text-align:right;">
0.4009491
</td>
<td style="text-align:right;">
0.8639886
</td>
<td style="text-align:right;">
0.5501847
</td>
<td style="text-align:right;">
0.9011016
</td>
<td style="text-align:right;">
1.2907615
</td>
<td style="text-align:right;">
0.7990418
</td>
<td style="text-align:right;">
1.5097039
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>Briefly, this synthetic data can be considered the results of a prospective cohort epidemiologic study. The outcome cannot cause the exposures (as might occur in a cross-sectional study). Correlations between exposure variables can be thought of as caused by common sources or modes of exposure. The nuisance variable Z can be assumed to be a potential confounder and not a collider. There are 7 exposures which have a complicated dependency structure. <span class="math inline"><em>X</em><sub>3</sub></span> and <span class="math inline"><em>X</em><sub>6</sub></span> do not have an impact on the outcome.</p>
<p>One issue is that many machine learning algorithms will fail given only 1 variable passed as a feature so let’s add some other covariates.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">niehs_data</span><span class="op">$</span><span class="va">Z2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">niehs_data</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">niehs_data</span><span class="op">$</span><span class="va">Z3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">niehs_data</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-cvtreemle">Run <code>CVtreeMLE</code>
<a class="anchor" aria-label="anchor" href="#run-cvtreemle"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ptm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/proc.time.html" class="external-link">proc.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert continuous X variables to their corresponding deciles for example</span></span>
<span><span class="va">niehs_data</span> <span class="op">&lt;-</span> <span class="va">niehs_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"X"</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ntile.html" class="external-link">ntile</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">10</span><span class="op">)</span>, .names <span class="op">=</span> <span class="st">"decile_{col}"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">niehs_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/CVtreeMLE.html">CVtreeMLE</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">niehs_data</span><span class="op">)</span>,</span>
<span>  w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Z"</span>, <span class="st">"Z2"</span>, <span class="st">"Z3"</span><span class="op">)</span>,</span>
<span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"decile_X1"</span>, <span class="st">"decile_X2"</span>, <span class="st">"decile_X3"</span>, <span class="st">"decile_X4"</span>, <span class="st">"decile_X5"</span>, <span class="st">"decile_X6"</span>, <span class="st">"decile_X7"</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>  n_folds <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  seed <span class="op">=</span> <span class="va">seed</span>,</span>
<span>  parallel_cv <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  num_cores <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  min_max <span class="op">=</span> <span class="st">"min"</span>,</span>
<span>  max_depth <span class="op">=</span> <span class="fl">2</span>, </span>
<span>  min_obs <span class="op">=</span> <span class="fl">25</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/proc.time.html" class="external-link">proc.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">ptm</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   7.184   0.816  91.497</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mixture-results">Mixture Results<a class="anchor" aria-label="anchor" href="#mixture-results"></a>
</h2>
<p>First let’s look at the k-fold specific estimates:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">k_fold_results</span> <span class="op">&lt;-</span> <span class="va">niehs_results</span><span class="op">$</span><span class="va">`V-Specific Mix Results`</span></span>
<span></span>
<span><span class="va">k_fold_results</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"K-fold Results"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
K-fold Results
</caption>
<thead><tr>
<th style="text-align:right;">
are
</th>
<th style="text-align:right;">
se
</th>
<th style="text-align:right;">
lower_ci
</th>
<th style="text-align:right;">
upper_ci
</th>
<th style="text-align:right;">
p_val
</th>
<th style="text-align:right;">
p_val_adj
</th>
<th style="text-align:right;">
rmse
</th>
<th style="text-align:left;">
mix_rule
</th>
<th style="text-align:right;">
fold
</th>
<th style="text-align:left;">
variables
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
-2.876
</td>
<td style="text-align:right;">
20.006
</td>
<td style="text-align:right;">
-42.087
</td>
<td style="text-align:right;">
36.335
</td>
<td style="text-align:right;">
0.885677
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.118
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
<tr>
<td style="text-align:right;">
-2.733
</td>
<td style="text-align:right;">
20.039
</td>
<td style="text-align:right;">
-42.009
</td>
<td style="text-align:right;">
36.544
</td>
<td style="text-align:right;">
0.891537
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.123
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
<tr>
<td style="text-align:right;">
-3.061
</td>
<td style="text-align:right;">
24.969
</td>
<td style="text-align:right;">
-51.999
</td>
<td style="text-align:right;">
45.878
</td>
<td style="text-align:right;">
0.902437
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5.026
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
<tr>
<td style="text-align:right;">
-2.196
</td>
<td style="text-align:right;">
18.755
</td>
<td style="text-align:right;">
-38.955
</td>
<td style="text-align:right;">
34.564
</td>
<td style="text-align:right;">
0.906806
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.452
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
<tr>
<td style="text-align:right;">
-3.257
</td>
<td style="text-align:right;">
21.951
</td>
<td style="text-align:right;">
-46.280
</td>
<td style="text-align:right;">
39.765
</td>
<td style="text-align:right;">
0.882028
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.489
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
<tr>
<td style="text-align:right;">
-3.371
</td>
<td style="text-align:right;">
16.739
</td>
<td style="text-align:right;">
-36.178
</td>
<td style="text-align:right;">
29.436
</td>
<td style="text-align:right;">
0.840393
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.000
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
<tr>
<td style="text-align:right;">
-3.441
</td>
<td style="text-align:right;">
21.135
</td>
<td style="text-align:right;">
-44.864
</td>
<td style="text-align:right;">
37.982
</td>
<td style="text-align:right;">
0.870658
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4.491
</td>
<td style="text-align:left;">
decile_X1 &lt;= 5 &amp; decile_X7 &lt;= 4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
decile_X1-decile_X7
</td>
</tr>
</tbody>
</table>
<p>This indicates that the exposure X2 was found in every fold to have the most minimizing impact on endocrine disruption if all individuals were were forced to be exposed to levels less around 0.41. This resembles a policy where, if everyone were still exposed to the other exposures but we created a regulation that restricted individuals to only exposure of X2 less than 0.41.</p>
<p>The pooled estimates, leveraging all the folds for our estimates oracle target parameter looks like:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pooled_mixture_results</span> <span class="op">&lt;-</span> <span class="va">niehs_results</span><span class="op">$</span><span class="va">`Oracle Region Results`</span></span>
<span></span>
<span><span class="va">pooled_mixture_results</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Oracle Mixture Results"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Oracle Mixture Results
</caption>
<thead><tr>
<th style="text-align:right;">
Region ARE
</th>
<th style="text-align:right;">
Standard Error
</th>
<th style="text-align:right;">
Lower CI
</th>
<th style="text-align:right;">
Upper CI
</th>
<th style="text-align:right;">
P-value
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:right;">
-3.12
</td>
<td style="text-align:right;">
7.776
</td>
<td style="text-align:right;">
-18.361
</td>
<td style="text-align:right;">
12.121
</td>
<td style="text-align:right;">
0.688247
</td>
</tr></tbody>
</table>
<p>Additional details for this and other features are given in the vignette.</p>
<hr>
</div>
<div class="section level2">
<h2 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h2>
<p>If you encounter any bugs or have any specific feature requests, please <a href="https://github.com/blind-contours/CVtreeMLE/issues" class="external-link">file an issue</a>. Further details on filing issues are provided in our <a href="https://github.com/blind-contours/%20CVtreeMLE/blob/main/CONTRIBUTING.md" class="external-link">contribution guidelines</a>.</p>
<hr>
</div>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h2>
<p>Contributions are very welcome. Interested contributors should consult our <a href="https://github.com/blind-contours/CVtreeMLE/blob/main/contributing.md" class="external-link">contribution guidelines</a> prior to submitting a pull request.</p>
<hr>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>After using the <code>CVtreeMLE</code> R package, please cite the following:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="sc">@</span>article{McCoy2023, </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>doi <span class="ot">=</span> {<span class="fl">10.21105</span><span class="sc">/</span>joss<span class="fl">.04181</span>}, </span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>url <span class="ot">=</span> {https<span class="sc">:</span><span class="er">//</span>doi.org<span class="sc">/</span><span class="fl">10.21105</span><span class="sc">/</span>joss<span class="fl">.04181</span>}, </span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>year <span class="ot">=</span> {<span class="dv">2023</span>}, publisher <span class="ot">=</span> {The Open Journal}, </span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>volume <span class="ot">=</span> {<span class="dv">8</span>}, number <span class="ot">=</span> {<span class="dv">82</span>}, pages <span class="ot">=</span> {<span class="dv">4181</span>}, </span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>author <span class="ot">=</span> {David McCoy and Alan Hubbard and Mark Van der Laan}, </span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>title <span class="ot">=</span> {CVtreeMLE<span class="sc">:</span> Efficient Estimation of Mixed Exposures using Data Adaptive Decision Trees and Cross<span class="sc">-</span>Validated Targeted Maximum Likelihood Estimation <span class="cf">in</span> R}, </span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>journal <span class="ot">=</span> {Journal of Open Source Software} }</span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="related">Related<a class="anchor" aria-label="anchor" href="#related"></a>
</h2>
<ul>
<li>
<a href="https://github.com/tlverse/sl3" class="external-link">R/<code>sl3</code></a> - An R package providing implementation for Super Learner ensemble machine learning algorithms.</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>The development of this software was supported in part through grants from the NIH-funded Biomedical Big Data Training Program at UC Berkeley where I was a biomedical big data fellow.</p>
<hr>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>© 2017-2024 David B. McCoy</p>
<p>The contents of this repository are distributed under the MIT license. See below for details:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>MIT License</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">Copyright</span> (c) <span class="dv">2017-2024</span> David B. McCoy</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>of this software and associated documentation <span class="fu">files</span> (the <span class="st">"Software"</span>), to deal</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="cf">in</span> the Software without restriction, including without limitation the rights</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>to use, copy, modify, merge, publish, distribute, sublicense, and<span class="sc">/</span>or sell</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>copies of the Software, and to permit persons to whom the Software is</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>furnished to do so, subject to the following conditions<span class="sc">:</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>The above copyright notice and this permission notice shall be included <span class="cf">in</span> all</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>copies or substantial portions of the Software.</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>THE SOFTWARE IS PROVIDED <span class="st">"AS IS"</span>, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>SOFTWARE.</span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing CVtreeMLE</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David McCoy <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5515-6307" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/blind-contours/CVtreeMLE/actions" class="external-link"><img src="https://github.com/blind-contours/CVtreeMLE/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/github/blind-contours/CVtreeMLE?branch=master" class="external-link"><img src="https://codecov.io/gh/blind-contours/CVtreeMLE/branch/main/graph/badge.svg?token=HJP5PYQSG4" alt="Coverage Status"></a></li>
<li><a href="https://www.r-pkg.org/pkg/CVtreeMLE" class="external-link"><img src="https://www.r-pkg.org/badges/version/CVtreeMLE" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=CVtreeMLE" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/CVtreeMLE" alt="CRAN downloads"></a></li>
<li><a href="https://CRAN.R-project.org/package=CVtreeMLE" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/CVtreeMLE" alt="CRAN total downloads"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/license-MIT-brightgreen.svg" alt="MIT license"></a></li>
<li><a href="https://app.codecov.io/gh/blind-contours/CVtreeMLE?branch=main" class="external-link"><img src="https://codecov.io/gh/blind-contours/CVtreeMLE/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David McCoy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
